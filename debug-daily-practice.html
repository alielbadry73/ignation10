<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Daily Practice - IG Nation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <style>
        body { padding: 20px; background: #f8f9fa; }
        .debug-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: white; }
        .question-card { margin: 10px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; background: #f8f9fa; }
        .success { color: #28a745; }
        .warning { color: #ffc107; }
        .error { color: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Debug Daily Practice Questions</h1>
        
        <!-- Current Questions Status -->
        <div class="debug-section">
            <h3>Current Questions Status</h3>
            <p>Chemistry Questions: <span id="chemistryCount">0</span></p>
            <p>Physics Questions: <span id="physicsCount">0</span></p>
            <p>Mathematics Questions: <span id="mathematicsCount">0</span></p>
        </div>
        
        <!-- Debug Actions -->
        <div class="debug-section">
            <h3>Debug Actions</h3>
            <div class="d-grid gap-2">
                <button class="btn btn-primary" onclick="debugAllQuestions()">üîç Debug All Questions</button>
                <button class="btn btn-warning" onclick="addTestQuestion('chemistry')">‚ûï Add Test Chemistry Question</button>
                <button class="btn btn-info" onclick="addTestQuestion('physics')">‚ûï Add Test Physics Question</button>
                <button class="btn btn-success" onclick="addTestQuestion('mathematics')">‚ûï Add Test Mathematics Question</button>
                <button class="btn btn-danger" onclick="clearAllQuestions()">üßπ Clear All Questions</button>
            </div>
        </div>
        
        <!-- Questions Display -->
        <div class="debug-section">
            <h3>Questions Display</h3>
            <div id="questionsDisplay">Click "Debug All Questions" to see current questions</div>
        </div>
        
        <!-- Debug Results -->
        <div class="debug-section">
            <h3>Debug Results</h3>
            <div id="debugResults">Click "Debug All Questions" to start debugging</div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        function debugAllQuestions() {
            const results = [];
            results.push('<h5>üîç Debugging all daily practice questions...</h5>');
            
            // Check each subject
            const subjects = ['chemistry', 'physics', 'mathematics'];
            
            subjects.forEach(subject => {
                const key = `${subject}_daily_practice_questions`;
                const questions = JSON.parse(localStorage.getItem(key) || '[]');
                
                results.push(`<h6>${subject.charAt(0).toUpperCase() + subject.slice(1)} Questions (${questions.length}):</h6>`);
                
                if (questions.length === 0) {
                    results.push(`<p class="warning">No questions found for ${subject}</p>`);
                } else {
                    questions.forEach((question, index) => {
                        results.push(`<div class="question-card">`);
                        results.push(`<p><strong>Question ${index + 1}:</strong></p>`);
                        results.push(`<ul>`);
                        results.push(`<li>ID: ${question.id || 'undefined'}</li>`);
                        results.push(`<li>Type: ${question.type || 'undefined'}</li>`);
                        results.push(`<li>Text: ${question.questionText || 'undefined'}</li>`);
                        results.push(`<li>Created: ${question.createdAt || 'undefined'}</li>`);
                        results.push(`<li>Subject: ${question.subject || 'undefined'}</li>`);
                        results.push(`<li>Points: ${question.points || 'undefined'}</li>`);
                        results.push(`<li>Difficulty: ${question.difficulty || 'undefined'}</li>`);
                        results.push(`<li>Topic: ${question.topic || 'undefined'}</li>`);
                        results.push(`</ul>`);
                        results.push(`</div>`);
                    });
                }
            });
            
            document.getElementById('debugResults').innerHTML = results.join('');
            updateQuestionCounts();
        }
        
        function addTestQuestion(subject) {
            const results = [];
            results.push(`<h5>‚ûï Adding test question for ${subject}...</h5>`);
            
            try {
                const key = `${subject}_daily_practice_questions`;
                const questions = JSON.parse(localStorage.getItem(key) || '[]');
                
                const testQuestion = {
                    id: Date.now().toString() + '_' + Math.random().toString(36).substr(2, 9),
                    type: 'short-answer',
                    questionContent: { type: 'text', content: '', filename: '' },
                    questionText: `Test question for ${subject} - ${new Date().toLocaleString()}`,
                    points: 10,
                    timeLimit: null,
                    difficulty: 'medium',
                    topic: 'Test Topic',
                    bulletPoints: [],
                    options: [],
                    correctAnswer: 'Test answer',
                    fileUploadSettings: {
                        allowedTypes: ['jpg', 'png', 'pdf'],
                        maxSize: 5
                    },
                    createdAt: new Date().toISOString(),
                    subject: subject
                };
                
                questions.push(testQuestion);
                localStorage.setItem(key, JSON.stringify(questions));
                
                results.push(`<p class="success">‚úÖ Test question added to ${subject}</p>`);
                results.push(`<p>Question ID: ${testQuestion.id}</p>`);
                results.push(`<p>Total questions in ${subject}: ${questions.length}</p>`);
                
            } catch (error) {
                results.push(`<p class="error">‚ùå Error adding test question: ${error.message}</p>`);
            }
            
            document.getElementById('debugResults').innerHTML = results.join('');
            updateQuestionCounts();
            debugAllQuestions();
        }
        
        function clearAllQuestions() {
            const results = [];
            results.push('<h5>üßπ Clearing all daily practice questions...</h5>');
            
            try {
                const subjects = ['chemistry', 'physics', 'mathematics'];
                subjects.forEach(subject => {
                    const key = `${subject}_daily_practice_questions`;
                    localStorage.removeItem(key);
                    results.push(`<p class="success">‚úÖ Cleared ${subject} questions</p>`);
                });
                
                results.push('<p class="success">üéâ All questions cleared successfully!</p>');
                
            } catch (error) {
                results.push(`<p class="error">‚ùå Error clearing questions: ${error.message}</p>`);
            }
            
            document.getElementById('debugResults').innerHTML = results.join('');
            updateQuestionCounts();
        }
        
        function updateQuestionCounts() {
            const chemistryQuestions = JSON.parse(localStorage.getItem('chemistry_daily_practice_questions') || '[]');
            const physicsQuestions = JSON.parse(localStorage.getItem('physics_daily_practice_questions') || '[]');
            const mathematicsQuestions = JSON.parse(localStorage.getItem('mathematics_daily_practice_questions') || '[]');
            
            document.getElementById('chemistryCount').textContent = chemistryQuestions.length;
            document.getElementById('physicsCount').textContent = physicsQuestions.length;
            document.getElementById('mathematicsCount').textContent = mathematicsQuestions.length;
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateQuestionCounts();
        });
    </script>
</body>
</html>






